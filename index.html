<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romix - ColecciÃ³n Invierno 2025</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary: #e83e8c;
            --secondary: #6f42c1;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        .contact-header {
            display: flex;
            align-items: center;
        }
        
        .whatsapp-header {
            background-color: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-weight: bold;
            margin-left: 15px;
        }
        
        .whatsapp-header i {
            margin-right: 5px;
        }
        
        .cart-icon {
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 1.2rem;
            margin-left: 15px;
            position: relative;
        }
        
        .cart-icon #cart-count {
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
            position: absolute;
            top: -10px;
            right: -10px;
        }
        
        nav {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 80px;
            z-index: 999;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            position: relative;
        }
        
        .nav-menu li a {
            display: block;
            padding: 15px 20px;
            color: var(--dark);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .nav-menu li a:hover {
            color: var(--primary);
            background-color: #f8f9fa;
        }
        
        .nav-menu li.active a {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .product-image {
            height: 200px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .product-image img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }

        /* Controles de carrusel en imÃ¡genes de producto */
        .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; display: flex; justify-content: space-between; pointer-events: none; }
        .carousel-btn { pointer-events: auto; background: rgba(255,255,255,0.85); border: 1px solid #ddd; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #333; }
        .carousel-dots { position: absolute; bottom: 6px; left: 0; right: 0; display: flex; justify-content: center; gap: 6px; }
        .carousel-dot { width: 6px; height: 6px; border-radius: 50%; background: #ced4da; }
        .carousel-dot.active { background: var(--primary); }

        .helper-hint { font-size: 0.85rem; color: #6c757d; margin: 6px 0 8px; }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
            height: 50px;
            overflow: hidden;
        }
        
        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .product-price small {
            font-size: 0.9rem;
            color: #6c757d;
            text-decoration: line-through;
            margin-left: 5px;
        }
        
        .product-colors {
            display: flex;
            margin-bottom: 10px;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: border 0.3s;
        }
        
        .color-option.selected {
            border: 2px solid var(--primary);
        }

        /* Estado de color segÃºn stock */
        .color-option.disabled { cursor: not-allowed; opacity: 0.4; position: relative; }
        .color-option.disabled::after {
            content: '\u2716';
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 12px; color: var(--danger);
        }

        .stock-indicator { display: flex; align-items: center; gap: 8px; margin: 8px 0 12px 0; font-size: 0.9rem; color: #495057; }
        .stock-indicator .light { width: 10px; height: 10px; border-radius: 50%; box-shadow: 0 0 0 2px rgba(0,0,0,0.05) inset; }
        .stock-ok { background-color: var(--success); }
        .stock-low { background-color: var(--warning); }
        .stock-out { background-color: var(--danger); }
        
        .product-sizes {
            margin-bottom: 15px;
        }
        
        .size-title {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 5px;
        }
        
        .size-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .size-option {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .size-option:hover {
            border-color: var(--primary);
        }
        
        .size-option.available {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .size-option.low-stock {
            background-color: var(--warning);
            color: var(--dark);
            border-color: var(--warning);
        }
        
        .size-option.unavailable {
            background-color: #f8f9fa;
            color: #6c757d;
            text-decoration: line-through;
        }
        
        .size-option.selected {
            border: 2px solid var(--primary);
        }
        .size-option.special {
            box-shadow: 0 0 0 2px var(--warning) inset;
            position: relative;
        }
        
        .product-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .btn {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn i {
            margin-right: 5px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
            flex-grow: 1;
            margin-right: 10px;
        }
        
        .btn-primary:hover {
            background-color: #d23371;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: #f8f9fa;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .contact-section {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .contact-info h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .contact-info p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .contact-info i {
            margin-right: 10px;
            color: var(--primary);
            width: 20px;
        }
        
        .business-hours {
            margin-top: 20px;
        }
        
        .business-hours li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 30px 0;
            margin-top: 50px;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }
        
        .footer-column h4 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column ul li a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-column ul li a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-links a {
            color: white;
            background-color: #495057;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .social-links a:hover {
            background-color: var(--primary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #495057;
            color: #adb5bd;
            font-size: 0.9rem;
        }
        
        .cart-section {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .cart-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .cart-table th, .cart-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .cart-table th {
            background-color: var(--light);
            font-weight: bold;
            color: var(--secondary);
        }
        
        .cart-table td {
            font-size: 0.9rem;
        }
        
        .cart-total {
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            text-align: right;
            color: var(--primary);
        }
        
        .cart-actions {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .modal-content h3 {
            margin-bottom: 20px;
            color: var(--secondary);
        }
        
        .modal-content label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .modal-content select, .modal-content input {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .modal-content .btn {
            width: 100%;
            margin-top: 10px;
        }
        
        .modal-content .btn-outline {
            border: 1px solid var(--dark);
            color: var(--dark);
        }
        
        .hidden {
            display: none;
        }
        
        .filters {
            margin-bottom: 20px;
        }
        
        .filters select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                text-align: center;
            }
            
            .contact-header {
                margin-top: 15px;
            }
            
            .nav-menu {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .cart-table {
                font-size: 0.8rem;
            }
            
            .cart-table th, .cart-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-tshirt"></i>
                <span>ROMIX</span>
            </div>
            <div class="contact-header">
                <a href="https://wa.me/5491154272065" class="whatsapp-header">
                    <i class="fab fa-whatsapp"></i> +54 9 11 5427-2065
                </a>
                <div class="cart-icon" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-count">0</span>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="active"><a href="#mujer"><i class="fas fa-female"></i> Mujer</a></li>
                <li><a href="#hombre"><i class="fas fa-male"></i> Hombre</a></li>
                <li><a href="#ninos"><i class="fas fa-child"></i> NiÃ±os</a></li>
                <li><a href="#contacto"><i class="fas fa-map-marker-alt"></i> Contacto</a></li>
                <li><a href="#" onclick="redirectToHelp(); return false;"><i class="fas fa-question-circle"></i> Ayuda</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <section id="cart" class="cart-section hidden">
            <h2 class="section-title"><i class="fas fa-shopping-cart"></i> Carrito de Compras</h2>
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Tipo</th>
                        <th>Color</th>
                        <th>Talle</th>
                        <th>Cantidad</th>
                        <th>Precio</th>
                        <th>Subtotal</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="cart-items"></tbody>
            </table>
            <div class="cart-total">
                Total: $<span id="cart-total">0</span>
            </div>
            <div class="cart-actions">
                <button class="btn btn-danger" onclick="clearCart()"><i class="fas fa-trash"></i> Vaciar Carrito</button>
                <button class="btn btn-success" onclick="sendToWhatsApp()"><i class="fab fa-whatsapp"></i> Enviar Pedido</button>
            </div>
        </section>
        
        <section id="catalogo">
            <h2 class="section-title"><i class="fas fa-store"></i> CatÃ¡logo</h2>
            <div class="filters">
                <select onchange="filterProducts('catalogo', this.value)">
                    <option value="all">Todos</option>
                    <option value="calzas">Calzas</option>
                    <option value="pantalones">Babuchas y Pantalones</option>
                    <option value="tops">Tops</option>
                    <option value="camperas">Camperas</option>
                    <option value="buzos">Buzos y Otros</option>
                    <option value="nena">Nena</option>
                    <option value="hombre">Hombre</option>
                </select>
            </div>
            <div class="products-grid" id="catalogo-grid"></div>
        </section>

        <section id="mujer">
            <h2 class="section-title"><i class="fas fa-female"></i> Ropa para Mujer</h2>
            <div class="filters">
                <select onchange="filterProducts('mujer', this.value)">
                    <option value="all">Todos</option>
                    <option value="calzas">Calzas</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="camperas">Camperas</option>
                    <option value="buzos">Buzos</option>
                </select>
            </div>
            <div class="products-grid">
                <!-- Calzas TÃ©rmicas -->
                <div class="product-card" data-type="calzas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Calza+TÃ©rmica+Lycra" alt="Calza TÃ©rmica Lycra">
                        <span class="product-badge">Nuevo</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Calza TÃ©rmica Lycra Chupin</h3>
                        <div class="product-price">$8,499 <small>$9,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris oscuro" data-color="Gris oscuro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option low-stock" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Calza TÃ©rmica Lycra Chupin', 'calzas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="calzas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Calza+TÃ©rmica+Jaspeado" alt="Calza TÃ©rmica Jaspeado Saplex">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Calza TÃ©rmica Jaspeado Saplex Chupin</h3>
                        <div class="product-price">$9,299</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul jaspeado" data-color="Azul jaspeado"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo jaspeado" data-color="Rojo jaspeado"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde jaspeado" data-color="Verde jaspeado"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Calza TÃ©rmica Jaspeado Saplex Chupin', 'calzas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Pantalones Mujer -->
                <div class="product-card" data-type="pantalones">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=PantalÃ³n+Jogger+TÃ©rmico" alt="PantalÃ³n Jogger TÃ©rmico Lycra">
                        <span class="product-badge">MÃ¡s vendido</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">PantalÃ³n Jogger TÃ©rmico Lycra</h3>
                        <div class="product-price">$12,999 <small>$14,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris oscuro" data-color="Gris oscuro"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('PantalÃ³n Jogger TÃ©rmico Lycra', 'pantalones', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="pantalones">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Palazo+Morley+Lanilla" alt="Palazo Morley Lanilla">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Palazo Morley Lanilla</h3>
                        <div class="product-price">$15,499</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo" data-color="Rojo"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde" data-color="Verde"></div>
                            <div class="color-option" style="background-color: #ffcc6b;" title="Beige" data-color="Beige"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option low-stock" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Palazo Morley Lanilla', 'pantalones', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Camperas Mujer -->
                <div class="product-card" data-type="camperas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Campera+TÃ©rmica+Jaspeado" alt="Campera TÃ©rmica Jaspeado Saplex">
                        <span class="product-badge">Oferta</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Campera TÃ©rmica Jaspeado Saplex</h3>
                        <div class="product-price">$24,999 <small>$29,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul jaspeado" data-color="Azul jaspeado"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo jaspeado" data-color="Rojo jaspeado"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde jaspeado" data-color="Verde jaspeado"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Campera TÃ©rmica Jaspeado Saplex', 'camperas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="camperas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Campera+Polar+Corderito" alt="Campera Polar Corderito">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Campera Polar Corderito Largo</h3>
                        <div class="product-price">$32,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Campera Polar Corderito Largo', 'camperas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Buzos Mujer -->
                <div class="product-card" data-type="buzos">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Buzo+AlgodÃ³n+Frisado" alt="Buzo AlgodÃ³n Frisado">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Buzo AlgodÃ³n Frisado</h3>
                        <div class="product-price">$14,499</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo" data-color="Rojo"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde" data-color="Verde"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Buzo AlgodÃ³n Frisado', 'buzos', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="buzos">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Maxibuzo+Frisado" alt="Maxibuzo Frisado AlgodÃ³n">
                        <span class="product-badge">Nuevo</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Maxibuzo Frisado AlgodÃ³n</h3>
                        <div class="product-price">$18,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Maxibuzo Frisado AlgodÃ³n', 'buzos', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="hombre">
            <h2 class="section-title"><i class="fas fa-male"></i> Ropa para Hombre</h2>
            <div class="filters">
                <select onchange="filterProducts('hombre', this.value)">
                    <option value="all">Todos</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="camperas">Camperas</option>
                    <option value="buzos">Buzos</option>
                    <option value="camisetas">Camisetas</option>
                </select>
            </div>
            <div class="products-grid">
                <!-- Pantalones Hombre -->
                <div class="product-card" data-type="pantalones">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=PantalÃ³n+AlgodÃ³n+Frisado" alt="PantalÃ³n AlgodÃ³n Frisado Premium">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">PantalÃ³n AlgodÃ³n Frisado Premium</h3>
                        <div class="product-price">$16,999 <small>$19,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris oscuro" data-color="Gris oscuro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('PantalÃ³n AlgodÃ³n Frisado Premium', 'pantalones', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="pantalones">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Babucha+Frisado+Premium" alt="Babucha Frisado AlgodÃ³n Premium">
                        <span class="product-badge">Oferta</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Babucha Frisado AlgodÃ³n Premium</h3>
                        <div class="product-price">$14,499</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="1">1</span>
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Babucha Frisado AlgodÃ³n Premium', 'pantalones', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Camperas Hombre -->
                <div class="product-card" data-type="camperas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Campera+AlgodÃ³n+Frisado" alt="Campera AlgodÃ³n Frisado">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Campera AlgodÃ³n Frisado</h3>
                        <div class="product-price">$27,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris oscuro" data-color="Gris oscuro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Campera AlgodÃ³n Frisado', 'camperas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="camperas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Campera+Corderoy" alt="Campera Corderoy con Corderito">
                        <span class="product-badge">MÃ¡s vendido</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Campera Corderoy con Corderito</h3>
                        <div class="product-price">$34,999 <small>$39,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Campera Corderoy con Corderito', 'camperas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Camisetas Hombre -->
                <div class="product-card" data-type="camisetas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Camiseta+TÃ©rmica+Frisado" alt="Camiseta TÃ©rmica Frisado">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Camiseta TÃ©rmica Frisado</h3>
                        <div class="product-price">$7,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #ffffff; border: 1px solid #ddd;" title="Blanco" data-color="Blanco"></div>
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="3">3</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                                <span class="size-option available" data-size="8">8</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Camiseta TÃ©rmica Frisado', 'camisetas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="buzos">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Buzo+Rustico+Lyrcra" alt="Buzo Rustico con Lycra">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Buzo Rustico con Lycra</h3>
                        <div class="product-price">$15,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="2">2</span>
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="5">5</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="7">7</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Buzo Rustico con Lycra', 'buzos', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="ninos">
            <h2 class="section-title"><i class="fas fa-child"></i> Ropa para NiÃ±os</h2>
            <div class="filters">
                <select onchange="filterProducts('ninos', this.value)">
                    <option value="all">Todos</option>
                    <option value="buzos">Buzos</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="calzas">Calzas</option>
                    <option value="camisetas">Camisetas</option>
                    <option value="camperas">Camperas</option>
                </select>
            </div>
            <div class="products-grid">
                <!-- Ropa NiÃ±o -->
                <div class="product-card" data-type="buzos">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Buzo+NiÃ±o" alt="Buzo AlgodÃ³n Frisado NiÃ±o">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Buzo AlgodÃ³n Frisado NiÃ±o</h3>
                        <div class="product-price">$9,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo" data-color="Rojo"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde" data-color="Verde"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                                <span class="size-option available" data-size="16">16</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Buzo AlgodÃ³n Frisado NiÃ±o', 'buzos', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="pantalones">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=PantalÃ³n+NiÃ±o" alt="PantalÃ³n AlgodÃ³n Frisado NiÃ±o">
                        <span class="product-badge">Nuevo</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">PantalÃ³n AlgodÃ³n Frisado NiÃ±o</h3>
                        <div class="product-price">$8,499</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #333333;" title="Gris" data-color="Gris"></div>
                            <div class="color-option" style="background-color: #654321;" title="MarrÃ³n" data-color="MarrÃ³n"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                                <span class="size-option available" data-size="16">16</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('PantalÃ³n AlgodÃ³n Frisado NiÃ±o', 'pantalones', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Ropa NiÃ±a -->
                <div class="product-card" data-type="calzas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Calza+TÃ©rmica+NiÃ±a" alt="Calza TÃ©rmica NiÃ±a">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Calza TÃ©rmica NiÃ±a</h3>
                        <div class="product-price">$7,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rosa" data-color="Rosa"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde" data-color="Verde"></div>
                            <div class="color-option" style="background-color: #ffcc6b;" title="Amarillo" data-color="Amarillo"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                                <span class="size-option available" data-size="16">16</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Calza TÃ©rmica NiÃ±a', 'calzas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="calzas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Calza+Jaspeado+Saplex+NiÃ±a" alt="Calza Jaspeado Saplex NiÃ±a">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Calza Jaspeado Saplex NiÃ±a</h3>
                        <div class="product-price">$8,499</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rosa jaspeado" data-color="Rosa jaspeado"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul jaspeado" data-color="Azul jaspeado"></div>
                            <div class="color-option" style="background-color: #6bff6b;" title="Verde jaspeado" data-color="Verde jaspeado"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                                <span class="size-option available" data-size="16">16</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Calza Jaspeado Saplex NiÃ±a', 'calzas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Camisetas NiÃ±os -->
                <div class="product-card" data-type="camisetas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Camiseta+TÃ©rmica+NiÃ±os" alt="Camiseta TÃ©rmica NiÃ±os">
                        <span class="product-badge">Oferta</span>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Camiseta TÃ©rmica NiÃ±os</h3>
                        <div class="product-price">$6,999 <small>$7,999</small></div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #ffffff; border: 1px solid #ddd;" title="Blanco" data-color="Blanco"></div>
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo" data-color="Rojo"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                                <span class="size-option available" data-size="16">16</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Camiseta TÃ©rmica NiÃ±os', 'camisetas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" data-type="camperas">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x300?text=Campera+Ketten+NiÃ±o" alt="Campera Ketten Frisado NiÃ±o">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Campera Ketten Frisado NiÃ±o</h3>
                        <div class="product-price">$19,999</div>
                        <div class="product-colors">
                            <div class="color-option" style="background-color: #000000;" title="Negro" data-color="Negro"></div>
                            <div class="color-option" style="background-color: #6b8cff;" title="Azul" data-color="Azul"></div>
                            <div class="color-option" style="background-color: #ff6b6b;" title="Rojo" data-color="Rojo"></div>
                        </div>
                        <div class="product-sizes">
                            <div class="size-title">Talles disponibles:</div>
                            <div class="size-options">
                                <span class="size-option available" data-size="4">4</span>
                                <span class="size-option available" data-size="6">6</span>
                                <span class="size-option available" data-size="8">8</span>
                                <span class="size-option available" data-size="10">10</span>
                                <span class="size-option available" data-size="12">12</span>
                                <span class="size-option available" data-size="14">14</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openModal('Campera Ketten Frisado NiÃ±o', 'camperas', this)">Comprar</button>
                            <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="contacto" class="contact-section">
            <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> Contacto y UbicaciÃ³n</h2>
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>InformaciÃ³n de contacto</h3>
                    <p><i class="fas fa-store"></i> <strong>Tienda fÃ­sica:</strong> Concordia 514 local b, CABA</p>
                    <p><i class="fas fa-phone"></i> <strong>TelÃ©fono:</strong> +54 9 11 5427-2065</p>
                    <p><i class="fab fa-whatsapp"></i> <strong>WhatsApp:</strong> +54 9 11 5427-2065</p>
                    <p><i class="fas fa-envelope"></i> <strong>Email:</strong> info@romix.com.ar</p>
                    <div class="business-hours">
                        <h3>Horarios de atenciÃ³n</h3>
                        <ul>
                            <li><span>Lunes a Viernes</span> <span>7:00 - 16:30 hs</span></li>
                            <li><span>SÃ¡bados</span> <span>7:00 - 12:30 hs</span></li>
                            <li><span>Domingos</span> <span>Cerrado</span></li>
                        </ul>
                    </div>
                </div>
                <div class="contact-info">
                    <h3>Formas de Pago</h3>
                    <p><i class="fas fa-money-bill-wave"></i> Efectivo, Transferencia, Mercado Pago</p>
                    <h3 style="margin-top: 20px;">Seguinos en redes</h3>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <div id="buy-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">Confirmar Compra</h3>
            <label>Color:</label>
            <select id="modal-color"></select>
            <label>Talle:</label>
            <select id="modal-size"></select>
            <label>Cantidad:</label>
            <input type="number" id="modal-quantity" min="1" value="1">
            <button class="btn btn-primary" onclick="addToCartFromModal()">Agregar al Carrito</button>
            <button class="btn btn-outline" onclick="closeModal()">Cancelar</button>
        </div>
    </div>
    
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h4>Productos</h4>
                <ul>
                    <li><a href="#mujer">Ropa para Mujer</a></li>
                    <li><a href="#hombre">Ropa para Hombre</a></li>
                    <li><a href="#ninos">Ropa para NiÃ±os</a></li>
                    <li><a href="#">Novedades</a></li>
                    <li><a href="#">Ofertas</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Ayuda</h4>
                <ul>
                    <li><a href="#">GuÃ­a de talles</a></li>
                    <li><a href="#">Cambios </a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Contacto</h4>
                <ul>
                    <li><a href="#contacto">DirecciÃ³n y horarios</a></li>
                    <li><a href="https://wa.me/5491154272065">WhatsApp</a></li>
                    <li><a href="tel:+5491154272065">Llamar por telÃ©fono</a></li>
                    <li><a href="mailto:info@romix.com.ar">Enviar email</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Romix - Todos los derechos reservados</p>
        </div>
    </footer>
    
   <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let favorites = [];
    let currentProduct = null;
    let currentType = null;

    // Configuración API: definir `window.API_BASE` antes de cargar la página,
    // o guardar en localStorage bajo la clave `API_BASE`.
    // Ejemplos:
    //   window.API_BASE = 'https://tu-backend.up.railway.app';
    //   localStorage.setItem('API_BASE', 'https://tu-backend.up.railway.app');
    const API_BASE = (window.API_BASE || localStorage.getItem('API_BASE') || '').replace(/\/$/, '');
    function apiUrl(path) {
        if (!API_BASE) return path; // relativo al mismo host si no se configuró
        return API_BASE + (path.startsWith('/') ? path : '/' + path);
    }

    // Carga de stock desde backend (si está disponible)
    async function loadBackendStock() {
        try {
            const res = await fetch(apiUrl('/api/stock'), { cache: 'no-store' });
            if (res.ok) {
                const data = await res.json();
                Object.assign(stockData, data);
            }
        } catch (e) {
            console.warn('Backend de stock no disponible; usando valores locales.');
        }
    }

    // Datos de stock e imÃ¡genes por color (ejemplo)
    let stockData = {
        'Calza TÃ©rmica Lycra Chupin': {
            colors: {
                'Negro': { stock: 8, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Negro+1',
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Negro+2'
                ]},
                'Gris oscuro': { stock: 2, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Gris+1'
                ]},
                'MarrÃ³n': { stock: 0, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Marron+1'
                ]}
            }
        },
        'Camiseta TÃ©rmica Frisado': {
            colors: {
                'Negro': { stock: 5, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Negro+1'
                ]},
                'Azul': { stock: 1, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Azul+1'
                ]},
                'Rojo': { stock: 0, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Rojo+1'
                ]}
            }
        },
        'Campera Polar Corderito Largo': {
            colors: {
                'Gris': { stock: 3, images: [
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Gris+1',
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Gris+2'
                ]},
                'Negro': { stock: 0, images: [
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Negro+1'
                ]}
            }
        }
    };

    // Sobrescritura con datos por talle para coincidir con nombres correctos
    Object.assign(stockData, {
        'Calza TÃ©rmica Lycra Chupin': {
            colors: {
                'Negro': { sizes: { '1': 5, '2': 4, '3': 3, '4': 2, '5': 2, '6': 1, '7': 1, '8': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Negro+1',
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Negro+2'
                ]},
                'Gris oscuro': { sizes: { '1': 0, '2': 1, '3': 1, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Gris+1'
                ]},
                'MarrÃ³n': { sizes: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Calza+Lycra+Marron+1'
                ]}
            }
        },
        'Camiseta TÃ©rmica Frisado': {
            colors: {
                'Negro': { sizes: { 'S': 2, 'M': 2, 'L': 1, 'XL': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Negro+1'
                ]},
                'Azul': { sizes: { 'S': 0, 'M': 1, 'L': 0, 'XL': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Azul+1'
                ]},
                'Rojo': { sizes: { 'S': 0, 'M': 0, 'L': 0, 'XL': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Camiseta+Frisado+Rojo+1'
                ]}
            }
        },
        'Campera Polar Corderito Largo': {
            colors: {
                'Gris': { sizes: { 'S': 1, 'M': 1, 'L': 1, 'XL': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Gris+1',
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Gris+2'
                ]},
                'Negro': { sizes: { 'S': 0, 'M': 0, 'L': 0, 'XL': 0 }, images: [
                    'https://via.placeholder.com/600x400?text=Campera+Corderito+Negro+1'
                ]}
            }
        }
    });

    const carouselState = new WeakMap();
    const LOW_STOCK_THRESHOLD = 3;

    // Utilidades de catÃ¡logo
    const DEFAULT_COLORS = ['Negro', 'Gris', 'Azul', 'Rojo'];
    const SIZES_BOTTOMS = ['1','2','3','4','5','6','7','8'];
    const SIZES_TOPS = ['S','M','L','XL'];
    const SIZES_KIDS = ['6','8','10','12','14','16'];

    function normalizeName(s) {
        return (s || "").toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu, "").replace(/\s+/g, " ").trim();
    }

    const ALLOWED_SIZES_TABLE = {
        [normalizeName("Ciclista lycra morley")]: ["1","2","3","4","5"],
        [normalizeName("Ciclista lycra estampado")]: ["1","2","3","4","5"],
        [normalizeName("Ciclista nena lycra liso")]: ["1","2","3","4","5"],
        [normalizeName("Ciclista nena jaspeado")]: ["1","2","3","4","5"],
        [normalizeName("Ciclista nena algodón/lycra")]: ["1","2","3","4","5"],
        [normalizeName("Top lycra liso y jaspeado nena")]: ["1","2","3","4","5"],
        [normalizeName("Top lycra estampado nena")]: ["1","2","3","4","5"],
        [normalizeName("Bermuda algodón rústico premium niño")]: ["1","2","3","4","5"],
        [normalizeName("Short lycra morley")]: ["1","2","3","4","5"],
        [normalizeName("Short lycra estampado")]: ["1","2","3","4","5"],
        [normalizeName("Pollera short morley lycra c/bolsillo")]: ["1","2","3","4","5"],
        [normalizeName("Pollera short lycra")]: ["1","2","3","4","5"],
        [normalizeName("Remera lycra dama")]: ["2","3","4","5","6","7","8"],
        [normalizeName("Remera lycra dry dama")]: ["2","3","4","5","6","7","8"],
        [normalizeName("Musculosa viscosa-morley")]: ["2","3","4","5","6","7","8"],
        [normalizeName("Camisola fibrana dama")]: ["3","4","5","6","7","8"],
        [normalizeName("Remera lycra dry deportivo hombre")]: ["1","2","3","4","5","6","7","8"],
        [normalizeName("Bermuda rústico hombre")]: ["1","2","3","4","5","6","7","8"],
        [normalizeName("Bermuda lycra liso hombre")]: ["1","2","3","4","5","6","7","8"],
        [normalizeName("Bermuda lycra jaspeado hombre")]: ["1","2","3","4","5","6","7","8"],
        [normalizeName("Remera algodón jaspeado hombre")]: ["1","2","3","4","5","6","7","8"]
    };

    function allowedSizesFor(productName, fallbackSizes) {
        const norm = normalizeName(productName);
        return ALLOWED_SIZES_TABLE[norm] || fallbackSizes || SIZES_BOTTOMS;
    }

    // Registra stock por defecto: todas las talles con cantidad 2
    function registerDefaultStock(productName, colors = DEFAULT_COLORS, sizes = SIZES_BOTTOMS) {
        if (!window.stockData) window.stockData = {};
        if (!stockData[productName]) stockData[productName] = { colors: {} };
        colors.forEach(c => {
            if (!stockData[productName].colors[c]) {
                const sizesMap = {};
                sizes.forEach(s => sizesMap[s] = 2);
                stockData[productName].colors[c] = {
                    sizes: sizesMap,
                    images: [
                        `https://via.placeholder.com/600x400?text=${encodeURIComponent(productName+' '+c)}+1`,
                        `https://via.placeholder.com/600x400?text=${encodeURIComponent(productName+' '+c)}+2`
                    ]
                };
            }
        });
    }

    const productsCatalog = [
        // CALZAS (Dama)
        { name: 'Calza lycra chupin', type: 'calzas' },
        { name: 'Calza lycra doble cintura', type: 'calzas' },
        { name: 'Calza lycra doble cintura jaspeado', type: 'calzas' },
        { name: 'Calza lycra recta', type: 'calzas' },
        { name: 'Calza saplex jaspeado chupin', type: 'calzas' },
        { name: 'Calza saplex jaspeado recta', type: 'calzas' },
        { name: 'Calza oxford', type: 'calzas' },
        { name: 'Calza oxford jaspeado saplex', type: 'calzas' },
        { name: 'Calza lycra estampado', type: 'calzas' },
        { name: 'Calza lycra arrugado', type: 'calzas' },
        { name: 'Calza lycra combinado', type: 'calzas' },
        { name: 'Calza algodÃ³n/lycra chupin', type: 'calzas' },
        { name: 'Calza algodÃ³n/lycra recta', type: 'calzas' },
        { name: 'Calza lycra frunce levanta cola', type: 'calzas' },
        { name: 'Calza gofrada lycra dama', type: 'calzas' },
        { name: 'Calza lycra morley dama', type: 'calzas' },

        // BABUCHAS Y PANTALONES (Dama)
        { name: 'PantalÃ³n jogger rÃºstico/lycra dama', type: 'pantalones' },
        { name: 'Babucha jogger algodÃ³n rÃºstico cargo dama', type: 'pantalones' },
        { name: 'PantalÃ³n rÃºstico recto dama', type: 'pantalones' },
        { name: 'Babucha modal con puÃ±o', type: 'pantalones' },
        { name: 'PantalÃ³n jogger de lycra dama', type: 'pantalones' },
        { name: 'PantalÃ³n jogger de lycra jaspeado dama', type: 'pantalones' },
        { name: 'PantalÃ³n modal con tira', type: 'pantalones' },
        { name: 'PantalÃ³n morley liviano dama', type: 'pantalones' },
        { name: 'Palazo morley liviano dama', type: 'pantalones' },

        // TOPS (Dama)
        { name: 'Top liso y jaspeado', type: 'tops' },
        { name: 'Top estampado', type: 'tops' },
        { name: 'Top gofrada lycra dama', type: 'tops' },
        { name: 'Top lycra morley dama', type: 'tops' },

        // CAMPERAS Y BUZOS (Dama)
        { name: 'Campera lycra', type: 'camperas' },
        { name: 'Campera lycra estampado', type: 'camperas' },
        { name: 'Campera jaspeado saplex', type: 'camperas' },
        { name: 'Campera modal', type: 'camperas' },
        { name: 'Campera lycra morley', type: 'camperas' },
        { name: 'Campera rÃºstico con lycra dama', type: 'camperas' },
        { name: 'Remera manga larga morley viscosa dama', type: 'buzos' },
        { name: 'Remera lycra dry deportivo dama', type: 'buzos' },
        { name: 'Buzo rÃºstico con lycra dama', type: 'buzos' },

        // NENA
        { name: 'Calza nena lycra liso', type: 'nena' },
        { name: 'Calza nena jaspeado', type: 'nena' },
        { name: 'Calza nena algodÃ³n/lycra', type: 'nena' },

        // HOMBRE - BABUCHAS Y PANTALONES
        { name: 'Babucha rÃºstico/lycra hombre', type: 'hombre' },
        { name: 'Babucha jogger lycra hombre', type: 'hombre' },
        { name: 'PantalÃ³n rÃºstico con cierre hombre', type: 'hombre' },
        { name: 'Babucha jogger lycra jaspeado hombre', type: 'hombre' },

        // HOMBRE - CAMPERAS
        { name: 'Campera lycra hombre', type: 'hombre' },
        { name: 'Campera jaspeado hombre', type: 'hombre' },

        // HOMBRE - BUZOS
        { name: 'Buzo rÃºstico con lycra hombre', type: 'hombre' },
    ];

    function sizesForType(type) {
        if (type === 'tops' || type === 'buzos' || type === 'camperas') return SIZES_TOPS;
        if (type === 'nena') return SIZES_KIDS;
        if (type === 'hombre') return SIZES_TOPS; // hombre top-like default
        return SIZES_BOTTOMS;
    }

    function colorsForType(type) {
        return DEFAULT_COLORS;
    }

    function renderCatalog() {
        const grid = document.getElementById('catalogo-grid');
        if (!grid) return;
        grid.innerHTML = '';
        productsCatalog.forEach(p => {
            const colors = colorsForType(p.type);
            const sizes = sizesForType(p.type);
            registerDefaultStock(p.name, colors, sizes);
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.type = p.type;
            card.innerHTML = `
                <div class="product-image">
                    <img src="https://via.placeholder.com/300x300?text=${encodeURIComponent(p.name)}" alt="${p.name}">
                </div>
                <div class="product-info">
                    <h3 class="product-title">${p.name}</h3>
                    <div class="product-price">$0</div>
                    <div class="product-colors">
                        ${colors.map(c => `<div class="color-option" title="${c}" data-color="${c}" style="background-color: ${c==='Negro'?'#000000':c==='Gris'?'#777777':c==='Azul'?'#0066ff':c==='Rojo'?'#ff3333':'#cccccc'};"></div>`).join('')}
                    </div>
                    <div class="product-sizes">
                        <div class="size-title">Talles disponibles:</div>
                        <div class="size-options">
                            ${sizes.map(s => `<span class="size-option available" data-size="${s}">${s}</span>`).join('')}
                        </div>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-primary" onclick="openModal('${p.name.replace(/'/g, "\'")}', '${p.type}', this)">Comprar</button>
                        <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                    </div>
                </div>`;
            grid.appendChild(card);
        });
        // Enlazar eventos para cards reciÃ©n renderizadas
        grid.querySelectorAll('.color-option').forEach(color => {
            color.addEventListener('click', () => selectColor(color));
        });
        grid.querySelectorAll('.size-option').forEach(size => {
            size.addEventListener('click', () => selectSize(size));
        });
    }

    function getProductCardByName(name) {
        return Array.from(document.querySelectorAll('.product-card')).find(card =>
            (card.querySelector('.product-title')?.textContent || '').trim() === name.trim()
        );
    }

    function stockFor(productName, colorName) {
        const product = stockData[productName];
        const col = product?.colors?.[colorName];
        if (!col) return undefined;
        if (typeof col.stock === 'number') return col.stock;
        if (col.sizes) {
            return Object.values(col.sizes).reduce((a,b) => a + (typeof b === 'number' ? b : 0), 0);
        }
        return undefined;
    }

    function stockForSize(productName, colorName, sizeName) {
        const product = stockData[productName];
        const col = product?.colors?.[colorName];
        if (!col) return undefined;
        if (col.sizes && typeof col.sizes[sizeName] === 'number') return col.sizes[sizeName];
        return undefined;
    }

    function statusFromQty(qty) {
        if (qty === 0) return { cls: 'stock-out', label: 'Agotado' };
        if (qty !== undefined && qty <= LOW_STOCK_THRESHOLD) return { cls: 'stock-low', label: 'Pocas unidades' };
        return { cls: 'stock-ok', label: 'Disponible' };
    }

    // Precio por talle: regla configurable
    // Config por defecto: sin recargo; podrás ajustar luego.
    // Precio por talle: regla configurable
    // Provisorio: + para talles 6-7-8
    const SIZE_PRICE_RULE = (window.SIZE_PRICE_RULE || JSON.parse(localStorage.getItem('SIZE_PRICE_RULE') || 'null')) || {
        special_sizes: ['6','7','8'],
        mode: 'delta',
        delta: 1500,
        multiplier: 1.0
    };
    // Normaliza nombres y tabla de precios por prenda (1–5 vs 6–8)
    function normalizeName(s) {
        return (s || '').toLowerCase()
            .normalize('NFD').replace(/\p{Diacritic}/gu, '')
            .replace(/\s+/g, ' ').trim();
    }
    const PRICE_TABLE = {
        [normalizeName('Calza lycra chupin')]: { common: 9500, special: 10000 },
        [normalizeName('Pantalón jogger lycra dama')]: { common: 12900, special: 13400 },
        [normalizeName('Babucha modal con puño')]: { common: 7000, special: 7500 },
        [normalizeName('Bermuda rústico hombre')]: { common: 9300, special: 9900 },
        [normalizeName('Remera lycra dry deportivo hombre')]: { common: 9400, special: 9900 }
    };
    function computePriceForSizeWithProduct(base, size, productName) {
        const norm = normalizeName(productName);
        const byProduct = PRICE_TABLE[norm];
        if (byProduct) {
            const isSpecial = SIZE_PRICE_RULE.special_sizes.includes(String(size));
            const p = isSpecial ? byProduct.special : byProduct.common;
            if (typeof p === 'number' && !isNaN(p) && p > 0) return p;
        }
        // Fallback a la regla global
        const isSpecial = SIZE_PRICE_RULE.special_sizes.includes(String(size));
        if (!isSpecial) return base;
        if (SIZE_PRICE_RULE.mode === 'multiplier') return Math.max(0, base * (SIZE_PRICE_RULE.multiplier || 1.0));
        return Math.max(0, base + (SIZE_PRICE_RULE.delta || 0));
    }

    function openModal(productName, productType, button) {
        const card = button.closest('.product-card');
        if (!validateSelection(card)) return;

        currentProduct = productName;
        currentType = productType;

        const colors = card.querySelectorAll('.color-option');
        const sizes = card.querySelectorAll('.size-option');
        const modal = document.getElementById('buy-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalColor = document.getElementById('modal-color');
        const modalSize = document.getElementById('modal-size');
        const modalQuantity = document.getElementById('modal-quantity');

        modalTitle.textContent = `Confirmar Compra: ${productName}`;
        modalColor.innerHTML = '';
        modalSize.innerHTML = ''; const allowed = new Set(allowedSizesFor(productName, Array.from(sizes).map(s => s.dataset.size)));

        colors.forEach(color => {
            if (color.classList.contains('disabled')) return;
            const option = document.createElement('option');
            const cname = color.dataset.color;
            const qty = stockFor(productName, cname);
            const st = statusFromQty(qty);
            option.value = cname;
            option.textContent = `${cname} (${st.label})`;
            modalColor.appendChild(option);
        });

        function fillModalSizes(colorName) {
            modalSize.innerHTML = ''; const allowed = new Set(allowedSizesFor(productName, Array.from(sizes).map(s => s.dataset.size)));
            sizes.forEach(size => {
                const sz = size.dataset.size;
                if (!allowed.has(String(sz))) return; const qty = stockForSize(productName, colorName, sz);
                if (typeof qty === 'number' && qty > 0) {
                    const st = statusFromQty(qty);
                    const option = document.createElement('option');
                    option.value = sz;
                    option.textContent = `${sz} (${st.label})`;
                    modalSize.appendChild(option);
                }
            });
        }

        const selectedColor = card.querySelector('.color-option.selected');
        const selectedSize = card.querySelector('.size-option.selected');
        const quantityInput = card.querySelector('.quantity-input');
        if (selectedColor) modalColor.value = selectedColor.dataset.color;
        fillModalSizes(modalColor.value);
        if (selectedSize && Array.from(modalSize.options).some(o => o.value === selectedSize.dataset.size)) {
            modalSize.value = selectedSize.dataset.size;
        }
        modalQuantity.value = quantityInput ? quantityInput.value : '1';

        modal.style.display = 'flex';
        modal.classList.add('animate__animated', 'animate__fadeIn');

        modalColor.onchange = () => { fillModalSizes(modalColor.value);};
        modalSize.onchange = () => {
            const base = parseCardBasePrice(card);
            const title = (card.querySelector('.product-title')?.textContent || '').trim();\n            const price = computePriceForSizeWithProduct(base, modalSize.value, title);
            setCardDisplayedPrice(card, price);
        };
    }

    function closeModal() {
        const modal = document.getElementById('buy-modal');
        modal.classList.remove('animate__animated', 'animate__fadeIn');
        modal.style.display = 'none';
        currentProduct = null;
        currentType = null;
    }

    function addToCartFromModal() {
        const color = document.getElementById('modal-color').value;
        const size = document.getElementById('modal-size').value;
        const quantity = parseInt(document.getElementById('modal-quantity').value);
        const card = Array.from(document.querySelectorAll('.product-card')).find(
            card => card.querySelector('.product-title').textContent === currentProduct
        );
        // Calcular precio según talle seleccionado
        const base = parseCardBasePrice(card);
        const price = computePriceForSizeWithProduct(base, size, currentProduct);

        if (!color || !size || !quantity || quantity < 1) {
            alert('Por favor, selecciona color, talle y una cantidad vÃ¡lida.');
            return;
        }

        const item = {
            id: Date.now(),
            name: currentProduct,
            type: currentType,
            color: color,
            size: size,
            quantity: quantity,
            price: price,
            subtotal: price * quantity
        };

        cart.push(item);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
        closeModal();
        showConfirmation();
    }

    function removeFromCart(id) {
        cart = cart.filter(item => item.id !== id);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
    }

    function clearCart() {
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
    }

    function updateCart() {
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        let total = 0;

        cartItems.innerHTML = '';
        cart.forEach(item => {
            const row = document.createElement('tr');
            const card = getProductCardByName(item.name);
            const base = parseCardBasePrice(card);
            const computedPrice = computePriceForSizeWithProduct(base, item.size, item.name);
            item.price = computedPrice;
            item.subtotal = item.price * item.quantity;
            row.innerHTML = `
                <td>${item.name}</td>
                <td>${item.type}</td>
                <td><select class="cart-color"></select></td>
                <td><select class="cart-size"></select></td>
                <td><input type="number" class="cart-qty" min="1" value="${item.quantity}" style="width:70px;"></td>
                <td>$${item.price.toFixed(2)}</td>
                <td class="cart-subtotal">$${(item.price * item.quantity).toFixed(2)}</td>
                <td>
                    <button class="btn btn-danger" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
                </td>
            `;
            const colorSelect = row.querySelector('.cart-color');
            const sizeSelect = row.querySelector('.cart-size');
            const card = getProductCardByName(item.name);
            const optionEls = card ? card.querySelectorAll('.color-option') : [];
            optionEls.forEach(opt => {
                const optEl = document.createElement('option');
                const cname = opt.dataset.color;
                const qty = stockFor(item.name, cname);
                const st = statusFromQty(qty);
                optEl.value = cname;
                optEl.textContent = `${cname} (${st.label})`;
                if (qty === 0) optEl.disabled = true;
                if (cname === item.color) optEl.selected = true;
                colorSelect.appendChild(optEl);
            });
            colorSelect.addEventListener('change', () => {
                item.color = colorSelect.value;
                // Re-llenar talles con el nuevo color
                fillCartSizes();
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            });
            function fillCartSizes() {
                sizeSelect.innerHTML = '';
                const sizesInCard = card ? card.querySelectorAll('.size-option') : [];
                sizesInCard.forEach(szEl => {
                    const sname = szEl.dataset.size;
                    const qtySz = stockForSize(item.name, colorSelect.value, sname);
                    if (typeof qtySz === 'number' && qtySz > 0) {
                        const st = statusFromQty(qtySz);
                        const o = document.createElement('option');
                        o.value = sname;
                        o.textContent = `${sname} (${st.label})`;
                        if (sname === item.size) o.selected = true;
                        sizeSelect.appendChild(o);
                    }
                });
                // Si el talle seleccionado quedÃ³ no disponible, escoger el primero
                if (!Array.from(sizeSelect.options).some(o => o.value === item.size)) {
                    const first = sizeSelect.options[0];
                    if (first) item.size = first.value;
                }
            }
            fillCartSizes();
            sizeSelect.addEventListener('change', () => { item.size = sizeSelect.value; const b = parseCardBasePrice(card); item.price = computePriceForSizeWithProduct(b, item.size, item.name); item.subtotal = item.price * item.quantity; localStorage.setItem('cart', JSON.stringify(cart)); updateCart(); });
            const qtyInput = row.querySelector('.cart-qty');
            qtyInput.addEventListener('input', () => {
                const q = Math.max(1, parseInt(qtyInput.value || '1'));
                item.quantity = q;
                item.subtotal = item.price * q;
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            });
            cartItems.appendChild(row);
            total += (item.price * item.quantity);
        });

        cartTotal.textContent = total.toFixed(2);
        cartCount.textContent = cart.reduce((count, item) => count + item.quantity, 0);
        const cartSection = document.getElementById('cart');
        if (cart.length === 0) {
            cartSection.classList.add('hidden');
        } else {
            cartSection.classList.remove('hidden');
        }
    }

    
    
    function enforceAllowedSizesOnCard(card) {
        const title = (card.querySelector('.product-title')?.textContent || '').trim();
        const defaultSizes = Array.from(card.querySelectorAll('.size-option')).map(el => el.dataset.size);
        const allowed = new Set(allowedSizesFor(title, defaultSizes));
        card.querySelectorAll('.size-option').forEach(el => {
            if (!allowed.has(String(el.dataset.size))) {
                el.classList.add('unavailable');
                el.style.display = 'none';
                if (el.classList.contains('selected')) el.classList.remove('selected');
            } else {
                el.style.display = '';
            }
        });
    }function markSpecialSizes() {
        document.querySelectorAll('.size-option').forEach(el => {
            if (SIZE_PRICE_RULE.special_sizes.includes(String(el.dataset.size))) {
                el.classList.add('special');
                if (!el.title || !el.title.includes('Especial')) {
                    el.title = ${el.dataset.size} – Talle especial;
                }
            }
        });
    }function toggleCart() {
        const cartSection = document.getElementById('cart');
        cartSection.classList.remove('hidden');
        cartSection.classList.add('animate__animated', 'animate__fadeIn');
        setTimeout(() => {
            cartSection.classList.remove('animate__animated', 'animate__fadeIn');
        }, 600);
        cartSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function showConfirmation() {
        alert('Producto agregado al carrito con Ã©xito.');
    }

    async function sendToWhatsApp() {
        if (cart.length === 0) {
            alert('El carrito estÃ¡ vacÃ­o. Agrega productos antes de enviar el pedido.');
            return;
        }

        // Intentar reservar en backend para descontar stock
        try {
            const items = cart.map(item => ({
                name: item.name,
                color: item.color,
                size: item.size,
                quantity: item.quantity,
                unit_price: item.price
            }));
            const resp = await fetch(apiUrl('/api/orders'), {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ items, channel: 'web', note: 'Pedido enviado por WhatsApp' })
            });
            if (!resp.ok) {
                const err = await resp.json().catch(() => ({}));
                console.warn('Reserva fallida:', err.error || resp.statusText);
            } else {
                await loadBackendStock();
                document.querySelectorAll('.product-card').forEach(card => { enforceAllowedSizesOnCard(card); setupCardStock(card); const title = (card.querySelector('.product-title')?.textContent || '').trim(); const allowed = new Set(allowedSizesFor(title, Array.from(card.querySelectorAll('.size-option')).map(s=>s.dataset.size))); card.querySelectorAll('.size-option').forEach(s=>{ if(s.classList.contains('selected') && !allowed.has(String(s.dataset.size))) s.classList.remove('selected'); });
                    const selectedColor = card.querySelector('.color-option.selected');
                    if (selectedColor) {
                        const title = (card.querySelector('.product-title')?.textContent || '').trim();
                        updateSizesForColor(card, title, selectedColor.dataset.color);
                    }
                });
            }
        } catch (e) {
            console.warn('Backend no disponible para reservar:', e?.message || e);
        }


        let message = 'Â¡Hola! Quiero realizar el siguiente pedido:\n\n';
        cart.forEach(item => {
            message += `${item.name} (${item.type})\n`;
            message += `Color: ${item.color}\n`;
            message += `Talle: ${item.size}\n`;
            message += `Cantidad: ${item.quantity}\n`;
            message += `Subtotal: $${item.subtotal.toFixed(2)}\n\n`;
        });
        message += `Total: $${cart.reduce((total, item) => total + item.subtotal, 0).toFixed(2)}`;

        const encodedMessage = encodeURIComponent(message);
        const phoneNumber = '+5491154272065';
        window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, '_blank');
    }

    function filterProducts(sectionId, type) {
        const section = document.getElementById(sectionId);
        const products = section.querySelectorAll('.product-card');
        products.forEach(product => {
            if (type === 'all' || product.dataset.type === type) {
                product.style.display = 'block';
                product.classList.add('animate__animated', 'animate__fadeIn');
            } else {
                product.style.display = 'none';
            }
        });
    }

    function initializeQuantityControls() {
        document.querySelectorAll('.product-card').forEach(card => {
            const quantityContainer = document.createElement('div');
            quantityContainer.className = 'quantity-control';
            quantityContainer.style.display = 'flex';
            quantityContainer.style.alignItems = 'center';
            quantityContainer.style.marginBottom = '10px';
            quantityContainer.innerHTML = `
                <span class="quantity-title" style="margin-right: 10px; font-size: 0.9rem; color: #6c757d;">Cantidad:</span>
                <button class="btn quantity-btn decrease" style="padding: 5px 10px; font-size: 0.9rem;">âˆ’</button>
                <input type="number" class="quantity-input" min="1" value="1" style="width: 50px; padding: 5px; margin: 0 5px; border: 1px solid #ddd; border-radius: 5px; text-align: center;">
                <button class="btn quantity-btn increase" style="padding: 5px 10px; font-size: 0.9rem;">+</button>
            `;
            card.querySelector('.product-actions').before(quantityContainer);

            const decreaseBtn = quantityContainer.querySelector('.decrease');
            const increaseBtn = quantityContainer.querySelector('.increase');
            const quantityInput = quantityContainer.querySelector('.quantity-input');

            decreaseBtn.addEventListener('click', () => {
                let value = parseInt(quantityInput.value);
                if (value > 1) {
                    quantityInput.value = value - 1;
                }
            });

            increaseBtn.addEventListener('click', () => {
                let value = parseInt(quantityInput.value);
                quantityInput.value = value + 1;
            });

            quantityInput.addEventListener('input', () => {
                if (quantityInput.value < 1 || isNaN(quantityInput.value)) {
                    quantityInput.value = 1;
                }
            });
        });
    }

    document.querySelectorAll('.color-option').forEach(color => {
        color.addEventListener('click', () => selectColor(color));
    });

    document.querySelectorAll('.size-option').forEach(size => {
        size.addEventListener('click', () => selectSize(size));
    });

    // Inicialización dinámica desde JSON y backend
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const catalogGrid = document.getElementById('catalogo-grid');
            const gridM = document.querySelector('#mujer .products-grid');
            const gridH = document.querySelector('#hombre .products-grid');
            const gridN = document.querySelector('#ninos .products-grid');
            if (catalogGrid) catalogGrid.innerHTML = '';
            if (gridM) gridM.innerHTML = '';
            if (gridH) gridH.innerHTML = '';
            if (gridN) gridN.innerHTML = '';
            await loadProductsJSON();
            await loadBackendStock();
            renderFromProducts();
            initializeQuantityControls();
            markSpecialSizes();
            updateCart();
        } catch (e) {
            console.warn('Init error', e);
        }
    });

    // Soporte: cargar productos JSON y renderizar
    let PRODUCTS = [];
    async function loadProductsJSON() {
        try {
            const res = await fetch('data/products.json', { cache: 'no-store' });
            if (!res.ok) return;
            PRODUCTS = await res.json();
            // Construye PRICE_TABLE y ALLOWED_SIZES_TABLE desde JSON
            PRODUCTS.forEach(p => {
                if (typeof p.price_common === 'number') {
                    const key = normalizeName(p.name);
                    window.PRICE_TABLE = window.PRICE_TABLE || {};
                    window.PRICE_TABLE[key] = { common: p.price_common, special: (p.price_special ?? p.price_common) };
                }
                if (Array.isArray(p.allowed_sizes) && p.allowed_sizes.length) {
                    const key = normalizeName(p.name);
                    window.ALLOWED_SIZES_TABLE = window.ALLOWED_SIZES_TABLE || {};
                    window.ALLOWED_SIZES_TABLE[key] = p.allowed_sizes.map(String);
                }
            });
        } catch (e) {
            console.warn('No se pudo cargar data/products.json', e);
        }
    }

    function sectionGrid(id) {
        if (id === 'catalogo') return document.getElementById('catalogo-grid');
        const sec = document.getElementById(id);
        return sec ? sec.querySelector('.products-grid') : null;
    }

    function buildCardFromProduct(p) {
        const colors = Array.isArray(p.colors) && p.colors.length ? p.colors : colorsForType(p.type);
        const sizes = Array.isArray(p.allowed_sizes) && p.allowed_sizes.length ? p.allowed_sizes : sizesForType(p.type);
        registerDefaultStock(p.name, colors, sizes);
        const card = document.createElement('div');
        card.className = 'product-card';
        card.dataset.type = p.type || '';
        const img = (p.images && p.images[0]) || `https://placehold.co/300x300?text=${encodeURIComponent(p.name)}`;
        const pc = typeof p.price_common === 'number' ? p.price_common : 0;
        const ps = typeof p.price_special === 'number' ? p.price_special : null;
        card.dataset.basePrice = String(pc);
        card.innerHTML = `
            <div class="product-image">
                <img src="${img}" alt="${p.name}">
            </div>
            <div class="product-info">
                <h3 class="product-title">${p.name}</h3>
                <div class="product-price">${formatCurrency(pc)}${ps ? ` <small>${formatCurrency(ps)}</small>` : ''}</div>
                <div class="product-colors">
                    ${colors.map(c => `<div class="color-option" title="${c}" data-color="${c}" style="background-color: ${c==='Negro'?'#000':c==='Gris'?'#777':c==='Azul'?'#06f':c==='Rojo'?'#f33':'#ccc'};"></div>`).join('')}
                </div>
                <div class="product-sizes">
                    <div class="size-title">Talles disponibles:</div>
                    <div class="size-options">
                        ${sizes.map(s => `<span class="size-option available" data-size="${s}">${s}</span>`).join('')}
                    </div>
                </div>
                <div class="product-actions">
                    <button class="btn btn-primary" onclick="openModal('${p.name.replace(/'/g, "\'")}', '${p.type}', this)">Comprar</button>
                    <button class="btn btn-outline"><i class="far fa-heart"></i></button>
                </div>
            </div>`;
        return card;
    }

    function renderFromProducts() {
        const sections = ['catalogo','mujer','hombre','ninos'];
        sections.forEach(sec => {
            const grid = sectionGrid(sec);
            if (!grid) return;
            grid.innerHTML = '';
            PRODUCTS.filter(p => (p.section || 'catalogo') === sec || sec === 'catalogo')
                .forEach(p => grid.appendChild(buildCardFromProduct(p)));
        });
        document.querySelectorAll('.color-option').forEach(c => c.addEventListener('click', () => selectColor(c)));
        document.querySelectorAll('.size-option').forEach(s => s.addEventListener('click', () => selectSize(s)));
        document.querySelectorAll('.product-card').forEach(card => {
            enforceAllowedSizesOnCard(card);
            setupCardStock(card);
        });
    }
</script>























